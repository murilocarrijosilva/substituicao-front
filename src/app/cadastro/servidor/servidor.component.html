<div class="servidor-component">
	<p-panel header="Cadastrar">
		<form>
			<div class="p-grid p-nogutter form-width">
				<div class="p-col-6">
					<label>Nome</label>
					<input [(ngModel)]="servidor.nome" name="nome" type="text" pInputText placeholder="Nome" />
				</div>
				<div class="p-col-6">
					<label class="form-control-label">Siape</label>
					<input [(ngModel)]="servidor.siape" name="siape" type="text" pInputText placeholder="Siape" />
				</div>
				<div class="p-col-6">
					<label class="form-control-label">Categoria</label>
					<div>
						<p-dropdown [style]="{'width':'100%'}" placeholder="Selecionar categoria" [options]="categorias" [(ngModel)]="servidor.categoria" name="categoria"></p-dropdown>
					</div>
				</div>
				<div class="p-col-6">
					<label class="form-control-label">Função</label>
					<input [(ngModel)]="servidor.funcao" name="funcao" type="text" pInputText placeholder="Função" />
				</div>
				<div class="p-col-6">
					<label class="form-control-label">Email</label>
					<input [(ngModel)]="servidor.email" name="email" type="text" pInputText placeholder="Email" />
				</div>
				<div class="p-col-2 p-offset-5">
					<button (click)="salvar(atualizando)" style="width: 100%; margin: 4px;" pButton type="submit" [label]="atualizando? 'Atualizar' : 'Enviar'"></button>
					<button *ngIf="atualizando" (click)="cancelarEdicao()" style="width: 100%; margin: 4px;" pButton type="submit" label="Cancelar"></button>
				</div>
			</div>
		</form>
	</p-panel>
	<div class="p-grid p-nogutter form-width">
		<div class="p-col-12">
			<p-table [value]="listaServidor" [paginator]="true" [rows]="7" [autoLayout]="true">
			<ng-template pTemplate="header">
				<tr>
					<th>Nome</th>
					<th>SIAPE</th>
					<th>Categoria</th>
					<th>Email</th>
					<th></th>
				</tr>
				<tr>
					<th>
						<input (input)="atualizarTabela()" [(ngModel)]="filtro.nome" type="text" pInputText style="width:100%" placeholder="Filtar nome">
					</th>
					<th>
						<input (input)="atualizarTabela()" [(ngModel)]="filtro.siape" type="text" pInputText style="width:100%" placeholder="Filtar SIAPE">
					</th>
					<th>
						<div>
							<p-dropdown (input)="atualizarTabela()" [style]="{'width':'100%'}" placeholder="Selecionar categoria" [options]="categorias" [(ngModel)]="filtro.categoria" name="categoria"></p-dropdown>
						</div>
					</th>
					<th>
						<input (input)="atualizarTabela()" [(ngModel)]="filtro.email" type="text" pInputText style="width:100%" placeholder="Filtar email">
					</th>
					<th></th>
				</tr>
			</ng-template>
			<ng-template pTemplate="body" let-servidor>
				<tr>
					<td>{{servidor.nome}}</td>
					<td>{{servidor.siape}}</td>
					<td>{{servidor.categoria | titlecase}}</td>
					<td>{{servidor.email}}</td>
					<td>
						<div style="text-align:center;">
							<button (click)="editar(servidor)" pButton type="button" icon="pi pi-pencil" iconPos="left" style="padding:0 10px; margin: 3px 3px;"></button>
							<button (click)="excluir(servidor)" pButton type="button" icon="pi pi-trash" iconPos="left" style="padding:0 10px; margin: 3px 3px;"></button>
						</div>
					</td>
				</tr>
			</ng-template>
			</p-table>
		</div>
	</div>
</div>

<p-confirmDialog header="Confirmar" icon="pi pi-exclamation-triangle"></p-confirmDialog>